<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Presentation</title>
    <link rel="stylesheet" href="components/reveal.js/css/reveal.css">
    <link rel="stylesheet" href="components/reveal.js/css/theme/serif.css">
    <link rel="stylesheet" href="components/reveal.js/lib/css/zenburn.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/main.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>Daniel Perez</h1>
          <h3>CTO @ <a href="http://claudetech.com" target="_blank">ClaudeTech</a></h3>
          <h3><i class="fa fa-github fa-margin"></i><a href="https://github.com/tuvistavie" target="_blank">tuvistavie</a></h3>
          <h3><a href="http://tuvistavie.com/codecheck" target="_blank">http://tuvistavie.com/codecheck</a></h3>
        </section>
        <section>
          <h2>作ったもの</h2>
          <h3><a href="https://projare.herokuapp.com" target="_blank">https://projare.herokuapp.com</a></h3><img src="http://res.cloudinary.com/dtdu3sqtl/image/upload/v1456937052/screenshot-1456936956_bfdh0e.png">
        </section>
        <section>
          <h2>作ったもの</h2>
          <h3><a href="https://projare.herokuapp.com" target="_blank">https://projare.herokuapp.com</a></h3>
          <ul>
            <li>ただのポートフォリオアプリ</li>
            <li>認証周りの機能</li>
            <li>目から血が出ない程度のUI</li>
            <li>プロジェクトはマークダウン</li>
            <li>簡単なフィルタリングと検索</li>
            <li>コメントとお気に入り機能</li>
            <li>カテゴリ分け</li>
          </ul>
        </section>
        <section>
          <h1>使った技術</h1>
          <h2>バックエンド</h2>
        </section>
        <section>
          <h1><img src="https://avatars2.githubusercontent.com/u/1481354?v=3&amp;s=400">Elixir</h1>
          <h1><img src="http://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2015/08/1438542624phoenix.png">Phoenix</h1>
        </section>
        <section>
          <section>
            <h1><img src="https://avatars2.githubusercontent.com/u/1481354?v=3&amp;s=400">Elixir</h1>
            <h1 class="sub"><img src="http://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2015/08/1438542624phoenix.png">Phoenix</h1>
          </section>
          <section>
            <h1><img src="https://avatars2.githubusercontent.com/u/1481354?v=3&amp;s=400">Elixir</h1>
            <h3>
              <ul>
                <li>動的型付け</li>
                <li>関数型</li>
                <li>Erlang VM上で動く</li>
                <li>Lisp的なマクロシステム</li>
                <li>Ruby的な文法</li>
              </ul>
            </h3>
          </section>
          <section>
            <h2>Elixirの雰囲気</h2>
            <pre><code>defmodule Projare.UserService do
  def facebook_login(token),
    do: Projare.Facebook.me(token) |> do_fb_login

  defp do_fb_login({:ok, %Response{status_code: 200, facebook_info}}) do
    facebook_info
    |> Map.delete(:token)
    |> with_picture
    |> create_or_login_user
  end
  defp do_fb_login({:ok, %Response{status_code: status_code}}),
    do: {:error, status_code, "Facebook login failed"}
  defp do_fb_login(_), do: {:error, 500, "Could not contact Facebook"}
end
</code></pre>
          </section>
        </section>
        <section>
          <section>
            <h1 class="sub"><img src="https://avatars2.githubusercontent.com/u/1481354?v=3&amp;s=400">Elixir</h1>
            <h1><img src="http://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2015/08/1438542624phoenix.png">Phoenix</h1>
          </section>
          <section>
            <h1><img src="http://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2015/08/1438542624phoenix.png">Phoenix</h1>
            <ul>
              <li>Elixir用のフレームワーク</li>
              <li>ErlangのHTTPサーバー</li>
              <li>いろいろRailsを参考</li>
              <li>わりとシンプル</li>
              <li>とにかく速い</li>
            </ul>
          </section>
          <section>
            <h2>Phoenixの雰囲気</h2>
            <pre><code>defmodule Projare.UserController do
  use Projare.Web, :controller

  def login(conn, %{"email" => email, "password" => password}) do
    user = Repo.get_by(User, email: email) |> User.authenticate(password)
    render_login(conn, user)
  end
  def login(conn, _params),
    do: send_json(conn, :bad_request, %{"error" => "Please provide your email and password"})

  defp render_login(conn, %User{} = user),
    do: render(conn, "show.json", user: user, full: true)
  defp render_login(conn, _) do
    conn |> put_status(:unauthorized) |> render("login_error.json")
  end
end
</code></pre>
          </section>
          <section>
            <h2>わかりやすいミドルウェア</h2>
            <pre><code>defmodule Projare.Plug.FetchUser do
  @behaviour Plug

  def init(_opts), do: []

  def call(conn, _opts),
    do: fetch_user(get_req_header(conn, "authorization"))
        |> assign_user(conn)

  defp assign_user(%User{} = user, conn),
    do: assign(conn, :current_user, user)
  defp assign_user(_, conn), do: conn

  defp fetch_user(["Bearer " <> token]),
    do: Repo.get_by(User, secret_token: token)
  defp fetch_user(_), do: nil
end
</code></pre>
          </section>
        </section>
        <section>
          <h1>使った技術</h1>
          <h2>フロントエンド</h2>
        </section>
        <section>
          <section>
            <h1><img src="http://riotjs.com/img/logo/riot240x.png">riot.js</h1>
            <h2>A React-like user interface micro-library</h2>
          </section>
          <section>
            <h1><img src="http://riotjs.com/img/logo/riot240x.png">riot.js</h1>
            <ul>
              <li>Reactと同じ役割</li>
              <li>圧倒的にシンプル</li>
              <li>パーフォーマンスがかなり良い</li>
              <li>だいぶ発展途上</li>
            </ul>
          </section>
          <section>
            <h2>riotの雰囲気</h2>
            <pre><code class="html"><todo>
  <h3>{ opts.title }</h3>
  <ul><li each="{ item, i in items }">{ item }</li></ul>
  <form onsubmit="{ add }">
    <input>
    <button>Add #{ items.length + 1 }</button>
  </form>
  <style scoped> h3 { font-size: 14px; } </style>
  <script>
    this.items = []
    add(e) {
      var input = e.target[0]
      this.items.push(input.value)
      input.value = ''
    }
  </script>
</todo>
</code></pre>
          </section>
        </section>
        <section>
          <h1>質問？</h1>
          <h2>Elixirでも、Riotでも</h2>
          <h3><a href="http://tuvistavie/codecheck">http://tuvistavie/codecheck</a></h3>
        </section>
      </div>
    </div>
    <script src="components/headjs/dist/1.0.0/head.min.js"></script>
    <script src="components/reveal.js/js/reveal.js"></script>
    <script>
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
      
        transition: 'slide', // none/fade/slide/convex/concave/zoom
      
        dependencies: [
          { src: 'components/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'components/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'components/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'components/reveal.js/plugin/zoom-js/zoom.js', async: true },
          { src: 'components/reveal.js/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
  </body>
</html>